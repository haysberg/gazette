{% set description = "Gazette Insoumise est un agr√©gateur de flux qui regroupe les derni√®res nouvelles des m√©dias alternatifs et ind√©pendants de la gauche de rupture." %}
{% set keywords = "Gazette Insoumise, La France Insoumise, LFI, m√©dias alternatifs, m√©dias ind√©pendants, gauche de rupture" %}
{% set long_name = "Gazette Insoumise" %}
{% set short_name = "Gazette LFI" %}
{% set default_favicon = "static/icons/favicon.ico" %}

<!DOCTYPE html>
<html lang="fr" dir="ltr">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>{{ long_name }}</title>
	<meta name="application-name" content="{{ long_name }}">
	<meta name="description" content="{{ description }}">
	<meta name="keywords" content="{{ keywords }}">
	<meta name="referrer" content="same-origin">
	<link rel="stylesheet" type="text/css" href="static/style.min.css">
	<link rel="icon" href="{{ default_favicon }}">
	<link rel="icon" type="image/png" sizes="192x192" href="static/icons/android_chrome_192x192.png" />
	<link rel="icon" type="image/png" sizes="512x512" href="static/icons/android_chrome_512x512.png" />
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="static/icons/apple_touch_icon.png" />
	<link rel="icon" type="image/png" sizes="16x16" href="static/icons/favicon_16x16.png" />
	<link rel="icon" type="image/png" sizes="32x32" href="static/icons/favicon_32x32.png" />
	<link rel="icon" type="image/png" sizes="96x96" href="static/icons/favicon_96x96.png" />
	<link rel="icon" type="image/png" sizes="150x150" href="static/icons/mstile_150x150.png" />
	<link rel="icon" type="image/png" sizes="512x512" href="static/icons/safari_pinned_tab.png" />
	<link rel="manifest" href="manifest.json">
	<meta name="theme-color" content="#7b13d6">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="author" content="haysberg">
	<meta property="og:image" content="{{ default_favicon }}" />
	<meta property="og:title" content="{{ long_name }}" />
	<meta property="og:description" content="{{ description }}">
	<meta property="og:locale" content="fr_FR" />
	<meta property="og:site_name" content="{{ long_name }}" />
</head>

<body>
	<header>
		<h1 id="title"><span id="random-emoji"></span>{{ long_name }}</h1>
		<hr style="margin-top: 0;">
		<div class="liens-lfi">
			<a id="ilb" href="https://institutlaboetie.fr/" target="_blank" referrerpolicy="origin">
				<img role="presentation" src="/static/img/ilbcombo.webp" loading="lazy">
			</a>
			<a href="https://programme.lafranceinsoumise.fr/" id="programme-btn" target="_blank" referrerpolicy="origin">
				<img loading="lazy" aria-label="Action Populaire" style="height: auto;" src="/static/img/programme.webp">
			</a>
			<a id="action-pop" href="https://actionpopulaire.fr/" target="_blank" referrerpolicy="origin">
				<img id="logo-ap" loading="lazy" aria-label="Action Populaire" src="/static/img/action-populaire_small.svg">
			</a>
			<a href="https://lafranceinsoumise.fr/2025/04/09/elections-municipales-2026/" target="_blank" referrerpolicy="origin">
				üèõÔ∏è Municipales
			</a>
			<a id="amfis" href="https://amfis.fr/" target="_blank" referrerpolicy="origin">
				<img loading="lazy" aria-label="Action Populaire" style="height: auto;" src="/static/img/amfis_cropped.webp">
			</a>
			<a id="install-button"><B>üì≤ Installer</B></a>
		</div>
		<hr>
	</header>
		<details id="feed-list" open>
			<summary id="sources">
				<h2>Liste des sources</h2>
			</summary>
			<div class="feed-details">
				{% for feed in feeds %}
				{% include "source.html" %}
				{% endfor %}
			</div>
		</details>
	<main>
		{% if posts_last24h is defined and posts_last24h|length > 0 %}
		{% with name="Ces derni√®res 24 heures", open=true, articles=posts_last24h %}
		{% include "category.html" %}
		{% endwith %}
		{% endif %}
		
		{% if posts_24_48h is defined and posts_24_48h|length > 0 %}
		{% with name="Hier", open=false, articles=posts_24_48h %}
		{% include "category.html" %}
		{% endwith %}
		{% endif %}
	</main>
	<footer>
		<small class="center italique">
			<I>
				Cette application est disponible en source ouverte, sous licence libre. Si vous souhaitez modifier le logiciel ou proposer une nouvelle fonctionnalit√©, faites-le <a href="https://github.com/haysberg/gazette">sur GitHub</a> !
				<br>Derni√®re mise √† jour de la page √† {{ render_time }}
			</I>
		</small>
	</footer>
</body>

<script>
	emoji_list = [
		"üê¢", "üáµüá∏", "üçâ", "‚úä", "üî∫", "üåà", "üì¨", "üïäÔ∏è", "üóûÔ∏è"
	];
	document.getElementById("random-emoji").innerText =
		emoji_list[(Math.random() * emoji_list.length) | 0];

	if (
		window.matchMedia &&
		window.matchMedia("(max-width: 480px)").matches
	) {
		console.log("Fermeture des sources sur t√©l√©phone.");
		feed_element = document.getElementById("feed-list");
		feed_element.open = false;
	}

	const isPWA =
		!!(
			window.matchMedia?.('(display-mode: standalone)').matches ||
			window.matchMedia?.('(display-mode: fullscreen)').matches ||
			window.navigator.standalone
		);

	if (
		typeof window.onbeforeinstallprompt == "object" &&
		!isPWA
	) {
		console.log("This browser supports the beforeinstallprompt event.");
		document.getElementById("install-button").style.display = "block";
		let installPrompt = null;
		const installButton = document.querySelector("#install-button");
		window.addEventListener("beforeinstallprompt", e => {
			e.preventDefault();
			installPrompt = e;
			installButton.addEventListener("click", async () => {
				if (!installPrompt) return;
				const r = await installPrompt.prompt();
				console.log(`Install prompt was: ${r.outcome}`);
				installPrompt = null;
				installButton.setAttribute("hidden", "");
			});
			installButton.removeAttribute("hidden");
		});
	} else {
		console.log("This browser does not support the beforeinstallprompt event.");
	}
</script>

<script data-goatcounter="https://insoumis.goatcounter.com/count" async src="https://gc.zgo.at/count.js"></script>

</html>
